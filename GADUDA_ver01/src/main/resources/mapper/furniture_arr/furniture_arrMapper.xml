<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.gaduda.mapper.furniture_arr.Furniture_arrMapper">

	<select id="getTime" resultType="String">
		<![CDATA[
			select sysdate from dual
		]]>
	</select>

	<select id="get_arr_info" resultType="kr.co.gaduda.furniture_arr.vo.Furniture_arrVO">
		<![CDATA[
			select FUR_ARR_PLAN_IMG_LOC, FUR_ARR_NAME, MEM_ID, FUR_ARR_PLAN_GOOD_NUM, FUR_ARR_PLAN_REPL_NUM  
			from FURNITURE_ARRANGEMENT_IMAGE FAI, FURNITURE_ARRANGEMENT_PLAN FAP 
			where FAI.FUR_ARR_PLAN_NO = FAP.FUR_ARR_PLAN_NO and FAI.FUR_ARR_PLAN_NO = #{fur_arr_plan_no}
		]]>
	</select>

	<select id="count_fur_arr" resultType="int">
		<![CDATA[
			select count(*) from FURNITURE_ARRANGEMENT_PLAN
		]]>
	</select>

	<!-- 배치도 컨셉 가져오기 -->
	<select id="fur_arr_con" resultType="String">
   <![CDATA[
      select CONCEPT_NAME 
      from FUrNITURE_ARRANGEMENT_PLAN P, FUrNITURE_ARR_PLAN_CONCEPT C, CONCEPT A 
      where P.FUR_ARR_PLAN_NO = C.FUR_ARR_PLAN_NO AND C.CONCEPT_NO = A.CONCEPT_NO 
      AND p.fur_arr_plan_no=#{fur_arr_plan_no}
   ]]>
	</select>
	<!-- 배치도 방종류 가져오기 -->
	<select id="fur_arr_room_kind" resultType="String">
   <![CDATA[
      select r.room_name
      from furniture_arrangement_plan p, room r
      where p.room_no=r.room_no and p.fur_arr_plan_no=#{fur_arr_plan_no}
   ]]>
	</select>

	<!-- 배치도 좋아요 수 올리기 -->
	<update id="upgood">
      <![CDATA[
      	update furniture_arrangement_plan set fur_arr_plan_good_num=nvl(FUR_ARR_PLAN_GOOD_NUM,0)+1
		where FUR_ARR_PLAN_NO=#{fur_arr_plan_no}
      ]]>
	</update>
	<!-- 배치도 좋아요 수 내리기 -->
	<update id="downgood">
      <![CDATA[
      	update furniture_arrangement_plan set fur_arr_plan_good_num=nvl(FUR_ARR_PLAN_GOOD_NUM,0)-1
		where FUR_ARR_PLAN_NO=#{fur_arr_plan_no}
      ]]>
	</update>
	<!-- 배치도 댓글 수 올리기 -->
	<update id="uprepl">
      <![CDATA[
      	update furniture_arrangement_plan set fur_arr_plan_repl_num=nvl(FUR_ARR_PLAN_repl_NUM,0)+1
		where FUR_ARR_PLAN_NO=#{fur_arr_plan_no}
      ]]>
	</update>
	<!-- 배치도 댓글 수 내리기 -->
	<update id="downrepl">
      <![CDATA[
      	update furniture_arrangement_plan set fur_arr_plan_repl_num=nvl(FUR_ARR_PLAN_repl_NUM,0)-1
		where FUR_ARR_PLAN_NO=#{fur_arr_plan_no}
      ]]>
	</update>

</mapper>